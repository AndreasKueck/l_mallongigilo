<!DOCTYPE html>
<html>

<head>
    <title>Klarigoj</title>
</head>

<body>
La ligil-mallongigilo <a href="https://jhau.de">https://jhau.de</a> estas test-versio, bazighas sur la instruoj donitaj en la artikolo "<a href="https://www.ilovefreesoftware.com/17/tutorial/create-free-url-shortener-using-google-apps-script-github-pages.html" target="_blank">CREATE A FREE URL SHORTENER USING GOOGLE APPS SCRIPT AND GITHUB PAGES</a>" kaj estas funkciigata de Andreas K&uuml;ck; jen <a href="https://jhau.de/klarigoj2.html">kontakto</a> (igu vian retumilon montri la labortablan version). Estas nenia garantio pri la funkciado, kaj utiligado okazas je la propra risko de la uzanto.<br><br>
Noto (2022-03-11):<br><br>
En 2022-03-10 mi konstatis, ke ne plu funkcias la plusendo al la longa URL. Mi trovis jenan provizoran solvon:<br>
En skripto-dosiero Code.gs mi anstatauigis
<pre>var html = "&lt;script&gt;window.open('" + redirectURL + "','_top');&lt;/script&gt;";</pre>
<pre>return HtmlService.createHtmlOutput(html).setXFrameOptionsMode(HtmlService.XFrameOptionsMode.ALLOWALL).setTitle('Redirecting...');</pre>
per
<pre>// La sekva kodo estas adapto de kodo trovita en https://gist.github.com/smhmic/e7f9a8188f59bb1d9f992395c866a047</pre>
<pre>return HtmlService.createHtmlOutput('<!DOCTYPE html><html><script>'</pre>
<pre>  +'window.close = function(){window.setTimeout(function(){google.script.host.close()},9)};'</pre>
<pre>  +'var a = document.createElement("a"); a.href="'+redirectURL+'"; a.target="_blank";'</pre>
<pre>  +'if(document.createEvent){'</pre>
<pre>  +'  var event=document.createEvent("MouseEvents");'</pre>
<pre>  +'  if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){window.document.body.append(a)}'</pre>                         
<pre>  +'  event.initEvent("click",true,true); a.dispatchEvent(event);'</pre>
<pre>  +'}else{ a.click() }'</pre>
<pre>  +'close();'</pre>
<pre>  +'</script>'</pre>
<pre>  // Offer URL as clickable link in case above code fails. | Ofertu URL, kiel alklakeblan ligilon, se la supra kodo malsukcesas</pre>
<pre>  +'<body style="word-break:break-word;font-family:sans-serif;">Malsukcesis malfermighi automate.  Klaku malsupre:<br/><a href="'+redirectURL+'" target="_blank" onclick="window.close()">Klaku chi tie, por antaueniri</a>.</body>'</pre>
<pre>  +'<script>google.script.host.setHeight(55);google.script.host.setWidth(410)</script>'</pre>
<pre>  +'</html>')
<pre>  .setWidth( 90 ).setHeight( 1 );</pre>
<pre>  SpreadsheetApp.getUi().showModalDialog( html, "Malfermighante ..." );</pre> 
<s>Kiel atentigon, mi endonis en Github-dosieron index.html supre de</s>
<pre><s>if (pathName == "/") {} else {</s></pre>
<s>jenon:</s>
<pre><s>alert("En Androido la sekva montro eventuale ne funkcias okaze de krozilo Chrome, sed almenau okaze de kroziloj Opera Mini (krom se estas agordite, ke bitkonsumshparo estu ekstrema) kaj  Mi Browser.");</s></pre>
</body>

</html>
